import{E as e,_ as t,a as i,b as s,c as a}from"./u-form.7eeeca2b.js";import{k as l,o,c as r,w as n,a as u,n as d,e as p,m as h,h as c,b as m,f,t as g,F as y,g as b,y as w,z as _,A as C,B as v,C as S,D as k,E as D,r as $,d as x,i as U,G as z,H as F,q as I}from"./index.c6333f91.js";import{r as T}from"./uni-app.es.ca8ae5e3.js";import{_ as N}from"./u-icon.1d9e440e.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as V}from"./u-button.9bc6adad.js";var A=B({name:"u-radio",emits:["change"],props:{name:{type:[String,Number],default:""},size:{type:[String,Number],default:34},shape:{type:String,default:""},disabled:{type:[String,Boolean],default:""},labelDisabled:{type:[String,Boolean],default:""},activeColor:{type:String,default:""},iconSize:{type:[String,Number],default:""},labelSize:{type:[String,Number],default:""}},data:()=>({parentData:{iconSize:null,labelDisabled:null,disabled:null,shape:null,activeColor:null,size:null,width:null,height:null,value:null,wrap:null}}),created(){this.parent=!1,this.updateParentData(),this.parent.children.push(this)},computed:{elDisabled(){return""!==this.disabled?this.disabled:null!==this.parentData.disabled&&this.parentData.disabled},elLabelDisabled(){return""!==this.labelDisabled?this.labelDisabled:null!==this.parentData.labelDisabled&&this.parentData.labelDisabled},elSize(){return this.size?this.size:this.parentData.size?this.parentData.size:34},elIconSize(){return this.iconSize?this.iconSize:this.parentData.iconSize?this.parentData.iconSize:20},elActiveColor(){return this.activeColor?this.activeColor:this.parentData.activeColor?this.parentData.activeColor:"primary"},elShape(){return this.shape?this.shape:this.parentData.shape?this.parentData.shape:"circle"},iconStyle(){let e={};return this.elActiveColor&&this.parentData.value===this.name&&!this.elDisabled&&(e.borderColor=this.elActiveColor,e.backgroundColor=this.elActiveColor),e.width=this.$u.addUnit(this.elSize),e.height=this.$u.addUnit(this.elSize),e},iconColor(){return this.name===this.parentData.value?"#ffffff":"transparent"},iconClass(){let e=[];return e.push("u-radio__icon-wrap--"+this.elShape),this.name===this.parentData.value&&e.push("u-radio__icon-wrap--checked"),this.elDisabled&&e.push("u-radio__icon-wrap--disabled"),this.name===this.parentData.value&&this.elDisabled&&e.push("u-radio__icon-wrap--disabled--checked"),e.join(" ")},radioStyle(){let e={};return this.parentData.width&&(e.width=this.$u.addUnit(this.parentData.width),e.flex=`0 0 ${this.$u.addUnit(this.parentData.width)}`),this.parentData.wrap&&(e.width="100%",e.flex="0 0 100%"),e}},methods:{updateParentData(){this.getParentData("u-radio-group")},onClickLabel(){this.elLabelDisabled||this.elDisabled||this.setRadioCheckedStatus()},toggle(){this.elDisabled||this.setRadioCheckedStatus()},emitEvent(){this.parentData.value!=this.name&&this.$emit("change",this.name)},setRadioCheckedStatus(){this.emitEvent(),this.parent&&(this.parent.setValue(this.name),this.parentData.value=this.name)}}},[["render",function(e,t,i,s,a,m){const f=T(l("u-icon"),N),g=c;return o(),r(g,{class:"u-radio",style:p([m.radioStyle])},{default:n((()=>[u(g,{class:d(["u-radio__icon-wrap",[m.iconClass]]),onClick:m.toggle,style:p([m.iconStyle])},{default:n((()=>[u(f,{class:"u-radio__icon-wrap__icon",name:"checkbox-mark",size:m.elIconSize,color:m.iconColor},null,8,["size","color"])])),_:1},8,["onClick","class","style"]),u(g,{class:"u-radio__label",onClick:m.onClickLabel,style:p({fontSize:e.$u.addUnit(i.labelSize)})},{default:n((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["onClick","style"])])),_:3},8,["style"])}],["__scopeId","data-v-300181d4"]]);var j=B({name:"u-radio-group",emits:["update:modelValue","input","change"],mixins:[e],props:{value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:"#2979ff"},size:{type:[String,Number],default:34},labelDisabled:{type:Boolean,default:!1},shape:{type:String,default:"circle"},iconSize:{type:[String,Number],default:20},width:{type:[String,Number],default:"auto"},wrap:{type:Boolean,default:!1}},data:()=>({uFromData:{inputAlign:"left"}}),created(){this.children=[]},mounted(){let e=this.$u.$parent.call(this,"u-form");e&&Object.keys(this.uFromData).map((t=>{this.uFromData[t]=e[t]}))},watch:{parentData(){this.children.length&&this.children.map((e=>{"function"==typeof e.updateParentData&&e.updateParentData()}))}},computed:{valueCom(){return this.modelValue},parentData(){return[this.value,this.disabled,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.width,this.wrap]}},methods:{setValue(e){this.children.map((t=>{t.parentData.value!=e&&(t.parentData.value="")})),this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e),setTimeout((()=>{this.dispatch("u-form-item","onFieldChange",e)}),60)}}},[["render",function(e,t,i,s,a,l){const u=c;return o(),r(u,{class:d(["u-radio-group u-clearfix","right"==a.uFromData.inputAlign?"flex-end":""])},{default:n((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}],["__scopeId","data-v-33501ada"]]);var P=B({name:"u-line-progress",props:{round:{type:Boolean,default:!0},type:{type:String,default:""},activeColor:{type:String,default:"#19be6b"},inactiveColor:{type:String,default:"#ececec"},percent:{type:Number,default:0},showPercent:{type:Boolean,default:!0},height:{type:[Number,String],default:28},striped:{type:Boolean,default:!1},stripedActive:{type:Boolean,default:!1}},data:()=>({}),computed:{progressStyle(){let e={};return e.width=this.percent+"%",this.activeColor&&(e.backgroundColor=this.activeColor),e}},methods:{}},[["render",function(e,t,i,s,a,l){const w=c;return o(),r(w,{class:"u-progress",style:p({borderRadius:i.round?"100rpx":0,height:i.height+"rpx",backgroundColor:i.inactiveColor})},{default:n((()=>[u(w,{class:d([[i.type?`u-type-${i.type}-bg`:"",i.striped?"u-striped":"",i.striped&&i.stripedActive?"u-striped-active":""],"u-active"]),style:p([l.progressStyle])},{default:n((()=>[e.$slots.default||e.$slots.$default?h(e.$slots,"default",{key:0},void 0,!0):i.showPercent?(o(),m(y,{key:1},[f(g(i.percent+"%"),1)],64)):b("",!0)])),_:3},8,["class","style"])])),_:3},8,["style"])}],["__scopeId","data-v-f1613dd0"]]);var O=B({name:"u-upload",emits:["on-oversize","on-list-change","on-preview","on-remove","on-success","on-change","on-error","on-progress","on-uploaded","on-choose-complete"],props:{showUploadList:{type:Boolean,default:!0},action:{type:String,default:""},maxCount:{type:[String,Number],default:52},showProgress:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},imageMode:{type:String,default:"aspectFill"},header:{type:Object,default:()=>({})},formData:{type:Object,default:()=>({})},name:{type:String,default:"file"},sizeType:{type:Array,default:()=>["original","compressed"]},sourceType:{type:Array,default:()=>["album","camera"]},previewFullImage:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},deletable:{type:Boolean,default:!0},maxSize:{type:[String,Number],default:Number.MAX_VALUE},fileList:{type:Array,default:()=>[]},uploadText:{type:String,default:"选择图片"},autoUpload:{type:Boolean,default:!0},showTips:{type:Boolean,default:!0},customBtn:{type:Boolean,default:!1},width:{type:[String,Number],default:200},height:{type:[String,Number],default:200},delBgColor:{type:String,default:"#fa3534"},delColor:{type:String,default:"#ffffff"},delIcon:{type:String,default:"close"},successIcon:{type:String,default:"checkbox-mark"},successColor:{type:String,default:"#ffffff"},toJson:{type:Boolean,default:!0},beforeUpload:{type:Function,default:null},beforeRemove:{type:Function,default:null},limitType:{type:Array,default:()=>["png","jpg","jpeg","webp","gif","image"]},index:{type:[Number,String],default:""}},mounted(){},data:()=>({lists:[],isInCount:!0,uploading:!1}),watch:{fileList:{immediate:!0,handler(e){let t=JSON.parse(JSON.stringify(this.lists));e.map((e=>{t.some((t=>t.url==e.url))||t.push({url:e.url,error:!1,progress:100})})),this.lists=JSON.parse(JSON.stringify(t))}},lists(e){this.$emit("on-list-change",e,this.index)}},methods:{clear(){this.lists=[]},reUpload(){this.uploadFile()},selectFile(){let e=this;if(e.disabled)return;const{name:t="",maxCount:i,multiple:s,maxSize:a,sizeType:l,camera:o,compressed:r,maxDuration:n,sourceType:u}=e;let d=null,p=JSON.parse(JSON.stringify(e.lists));const h=i-p.length;d=new Promise(((e,t)=>{w({count:s?h>9?9:h:1,sourceType:u,sizeType:l,success:e,fail:t})})),d.then((t=>{let l=e.lists.length;t.tempFiles.map(((t,l)=>{if(e.checkFileExt(t)&&(s||!(l>=1)))if(t.size>a)e.$emit("on-oversize",t,e.lists,e.index),e.showToast("超出允许的文件大小");else{if(i<=p.length)return e.$emit("on-exceed",t,e.lists,e.index),void e.showToast("超出最大允许的文件个数");p.push({url:t.path,progress:0,error:!1,file:t})}})),this.deepClone(p,e.lists),e.$emit("on-choose-complete",e.lists,e.index),e.autoUpload&&e.uploadFile(l)})).catch((t=>{e.$emit("on-choose-fail",t)}))},showToast(e,t=!1){(this.showTips||t)&&_({title:e,icon:"none"})},upload(){this.uploadFile()},retry(e){this.lists[e].progress=0,this.lists[e].error=!1,this.lists[e].response=null,C({title:"重新上传"}),this.uploadFile(e)},async uploadFile(e=0){if(this.disabled)return;if(this.uploading)return;if(e>=this.lists.length)return void this.$emit("on-uploaded",this.lists,this.index);if(100==this.lists[e].progress)return void(0==this.autoUpload&&this.uploadFile(e+1));if(this.beforeUpload&&"function"==typeof this.beforeUpload){let t=this.beforeUpload.bind(this.$u.$parent.call(this))(e,this.lists);if(t&&"function"==typeof t.then)await t.then((e=>{})).catch((t=>this.uploadFile(e+1)));else if(!1===t)return this.uploadFile(e+1)}if(!this.action)return void this.showToast("请配置上传地址",!0);this.lists[e].error=!1,this.uploading=!0;v({url:this.action,filePath:this.lists[e].url,name:this.name,formData:this.formData,header:this.header,success:t=>{let i=this.toJson&&this.$u.test.jsonString(t.data)?JSON.parse(t.data):t.data;[200,201,204].includes(t.statusCode)?(this.lists[e].response=i,this.lists[e].progress=100,this.lists[e].error=!1,this.$emit("on-success",i,e,this.lists,this.index)):this.uploadError(e,i)},fail:t=>{this.uploadError(e,t)},complete:t=>{S(),this.uploading=!1,this.uploadFile(e+1),this.$emit("on-change",t,e,this.lists,this.index)}}).onProgressUpdate((t=>{t.progress>0&&(this.lists[e].progress=t.progress,this.$emit("on-progress",t,e,this.lists,this.index))}))},uploadError(e,t){this.lists[e].progress=0,this.lists[e].error=!0,this.lists[e].response=null,this.$emit("on-error",t,e,this.lists,this.index),this.showToast("上传失败，请重试")},deleteItem(e){k({title:"提示",content:"您确定要删除此项吗？",success:async t=>{if(t.confirm)if(this.beforeRemove&&"function"==typeof this.beforeRemove){let t=this.beforeRemove.bind(this.$u.$parent.call(this))(e,this.lists);t&&"function"==typeof t.then?await t.then((t=>{this.handlerDeleteItem(e)})).catch((e=>{this.showToast("已终止移除")})):!1===t?this.showToast("已终止移除"):this.handlerDeleteItem(e)}else this.handlerDeleteItem(e)}})},handlerDeleteItem(e){this.lists[e].process<100&&this.lists[e].process>0&&void 0!==this.lists[e].uploadTask&&this.lists[e].uploadTask.abort(),this.lists.splice(e,1),this.$forceUpdate(),this.$emit("on-remove",e,this.lists,this.index)},remove(e){e>=0&&e<this.lists.length&&(this.lists.splice(e,1),this.$emit("on-list-change",this.lists,this.index))},doPreviewImage(e,t){if(!this.previewFullImage)return void this.$emit("on-preview",e,this.lists,this.index);const i=this.lists.map((e=>e.url||e.path));D({urls:i,current:e,success:()=>{this.$emit("on-preview",e,this.lists,this.index)},fail:()=>{_({title:"预览图片失败",icon:"none"})}})},checkFileExt(e){let t=!1,i="";return i=e.name.replace(/.+\./,"").toLowerCase(),t=this.limitType.some((e=>e.toLowerCase()===i)),t||this.showToast(`不允许选择${i}格式的文件`),t},deepClone(e,t){for(let i in e){const s=e[i];Array.isArray(s)?(t[i]=[],this.deepClone(s,t[i])):null!==s&&"object"==typeof s?(t[i]={},this.deepClone(s,t[i])):t[i]=s}}}},[["render",function(e,t,i,s,a,d){const w=T(l("u-icon"),N),_=c,C=T(l("u-line-progress"),P),v=U;return i.disabled?b("",!0):(o(),r(_,{key:0,class:"u-upload"},{default:n((()=>[i.showUploadList?(o(!0),m(y,{key:0},$(a.lists,((t,s)=>(o(),r(_,{class:"u-list-item u-preview-wrap",key:s,style:p({width:e.$u.addUnit(i.width),height:e.$u.addUnit(i.height)})},{default:n((()=>[i.deletable?(o(),r(_,{key:0,class:"u-delete-icon",onClick:x((e=>d.deleteItem(s)),["stop"]),style:p({background:i.delBgColor})},{default:n((()=>[u(w,{class:"u-icon",name:i.delIcon,size:"20",color:i.delColor},null,8,["name","color"])])),_:2},1032,["onClick","style"])):b("",!0),i.showProgress&&t.progress>0&&!t.error&&t.progress<100?(o(),r(C,{key:1,"show-percent":!1,height:"16",class:"u-progress",percent:t.progress},null,8,["percent"])):b("",!0),t.error?(o(),r(_,{key:2,onClick:x((e=>d.retry(s)),["stop"]),class:"u-error-btn"},{default:n((()=>[f("点击重试")])),_:2},1032,["onClick"])):b("",!0),t.isImage?b("",!0):(o(),r(v,{key:3,onClick:x((e=>d.doPreviewImage(t.url||t.path,s)),["stop"]),class:"u-preview-image",src:t.url||t.path,mode:i.imageMode},null,8,["onClick","src","mode"]))])),_:2},1032,["style"])))),128)):b("",!0),h(e.$slots,"file",{file:a.lists},void 0,!0),i.maxCount>a.lists.length?(o(),r(_,{key:1,style:{display:"inline-block"},onClick:d.selectFile},{default:n((()=>[h(e.$slots,"addBtn",{},void 0,!0),i.customBtn?b("",!0):(o(),r(_,{key:0,class:"u-list-item u-add-wrap","hover-class":"u-add-wrap__hover","hover-stay-time":"150",style:p({width:e.$u.addUnit(i.width),height:e.$u.addUnit(i.height)})},{default:n((()=>[u(w,{name:"plus",class:"u-add-btn",size:"40"}),u(_,{class:"u-add-tips"},{default:n((()=>[f(g(i.uploadText),1)])),_:1})])),_:1},8,["style"]))])),_:3},8,["onClick"])):b("",!0)])),_:3}))}],["__scopeId","data-v-5f201213"]]);var E=B({name:"u-toast",props:{zIndex:{type:[Number,String],default:""}},data:()=>({isShow:!1,timer:null,config:{params:{},title:"",type:"",duration:2e3,isTab:!1,url:"",icon:!0,position:"center",callback:null,back:!1},tmpConfig:{}}),computed:{iconName(){if(["error","warning","success","info"].indexOf(this.tmpConfig.type)>=0&&this.tmpConfig.icon){return this.$u.type2icon(this.tmpConfig.type)}},uZIndex(){return this.isShow?this.zIndex?this.zIndex:this.$u.zIndex.toast:"999999"}},methods:{show(e){this.tmpConfig=this.$u.deepMerge(this.config,e),this.timer&&(clearTimeout(this.timer),this.timer=null),this.isShow=!0,this.timer=setTimeout((()=>{this.isShow=!1,clearTimeout(this.timer),this.timer=null,"function"==typeof this.tmpConfig.callback&&this.tmpConfig.callback(),this.timeEnd()}),this.tmpConfig.duration)},hide(){this.isShow=!1,this.timer&&(clearTimeout(this.timer),this.timer=null)},timeEnd(){if(this.tmpConfig.url){if("/"!=this.tmpConfig.url[0]&&(this.tmpConfig.url="/"+this.tmpConfig.url),Object.keys(this.tmpConfig.params).length){let e="";/.*\/.*\?.*=.*/.test(this.tmpConfig.url)?(e=this.$u.queryParams(this.tmpConfig.params,!1),this.tmpConfig.url=this.tmpConfig.url+"&"+e):(e=this.$u.queryParams(this.tmpConfig.params),this.tmpConfig.url+=e)}this.tmpConfig.isTab?z({url:this.tmpConfig.url}):F({url:this.tmpConfig.url})}else this.tmpConfig.back&&this.$u.route({type:"back"})}}},[["render",function(e,t,i,s,a,h){const m=T(l("u-icon"),N),y=c,w=I;return o(),r(y,{class:d(["u-toast",[a.isShow?"u-show":"","u-type-"+a.tmpConfig.type,"u-position-"+a.tmpConfig.position]]),style:p({zIndex:h.uZIndex})},{default:n((()=>[u(y,{class:"u-icon-wrap"},{default:n((()=>[a.tmpConfig.icon?(o(),r(m,{key:0,class:"u-icon",name:h.iconName,size:30,color:a.tmpConfig.type},null,8,["name","color"])):b("",!0)])),_:1}),u(w,{class:"u-text"},{default:n((()=>[f(g(a.tmpConfig.title),1)])),_:1})])),_:1},8,["class","style"])}],["__scopeId","data-v-6012d1e0"]]);var L=B({data(){return{action:this.$u.apiBaseUrl+"/user/upload",newUser:{u_id:"",u_nickname:"",u_pwd:"",u_repwd:"",u_sex:"",u_avatar:""},rules:{u_id:[{required:!0,message:"请填写账号",trigger:["blur"]},{min:6,message:"账号不得少于6个字符",trigger:["blur"]}],u_pwd:[{required:!0,message:"请填写密码",trigger:["blur"]},{min:6,message:"密码不得少于6个字符",trigger:["blur"]}],u_repwd:[{required:!0,message:"请填写确认密码",trigger:["blur"]},{validator:(e,t,i)=>t==this.newUser.u_pwd,message:"两次密码不一致",trigger:["blur"]}]}}},methods:{uploadAvatar(){this.$refs.uUpload.upload()},onUploadAvatar(e,t,i,s){e.success&&(this.newUser.u_avatar=e.data,this.$u.toast("上传成功"))},register(){this.$refs.uForm.validate((async e=>{e?(console.log("验证通过"),await this.$u.post("/user/register",this.newUser),this.$u.toast("注册成功"),this.$u.route({url:"/pages/login/login",type:"redirect"})):(console.log("验证失败"),this.$u.toast("注册信息错误"))}))}},onReady(){this.$refs.uForm.setRules(this.rules)}},[["render",function(e,d,p,h,m,g){const y=T(l("u-image"),t),b=I,w=c,_=T(l("u-input"),i),C=T(l("u-form-item"),s),v=T(l("u-radio"),A),S=T(l("u-radio-group"),j),k=T(l("u-upload"),O),D=T(l("u-button"),V),$=T(l("u-form"),a),x=T(l("u-toast"),E);return o(),r(w,{class:"register"},{default:n((()=>[u(w,{style:{margin:"20rpx 0rpx 30rpx 0rpx",display:"flex","justify-content":"center",width:"100%"}},{default:n((()=>[u(y,{width:"30%",height:"200rpx",src:"/assets/welcome.4f33b3bd.svg"}),u(w,{style:{"font-size":"50rpx","font-weight":"bold","margin-left":"20rpx"}},{default:n((()=>[u(w,null,{default:n((()=>[u(b,null,{default:n((()=>[f("Hi，")])),_:1})])),_:1}),u(w,null,{default:n((()=>[u(b,null,{default:n((()=>[f("很高兴遇见你~")])),_:1})])),_:1})])),_:1})])),_:1}),u($,{model:m.newUser,ref:"uForm","label-width":130,style:{width:"96%","background-color":"#FFFFFF",padding:"0 20rpx"}},{default:n((()=>[u(C,{label:"账号",prop:"u_id"},{default:n((()=>[u(_,{modelValue:m.newUser.u_id,"onUpdate:modelValue":d[0]||(d[0]=e=>m.newUser.u_id=e),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),u(C,{label:"密码",prop:"u_pwd"},{default:n((()=>[u(_,{modelValue:m.newUser.u_pwd,"onUpdate:modelValue":d[1]||(d[1]=e=>m.newUser.u_pwd=e),type:"password",placeholder:"请设置密码"},null,8,["modelValue"])])),_:1}),u(C,{label:"确认密码",prop:"u_repwd"},{default:n((()=>[u(_,{modelValue:m.newUser.u_repwd,"onUpdate:modelValue":d[2]||(d[2]=e=>m.newUser.u_repwd=e),type:"password",placeholder:"请再输入一次密码"},null,8,["modelValue"])])),_:1}),u(C,{label:"昵称"},{default:n((()=>[u(_,{modelValue:m.newUser.u_nickname,"onUpdate:modelValue":d[3]||(d[3]=e=>m.newUser.u_nickname=e),placeholder:"请输入昵称"},null,8,["modelValue"])])),_:1}),u(C,{label:"性别"},{default:n((()=>[u(S,{modelValue:m.newUser.u_sex,"onUpdate:modelValue":d[4]||(d[4]=e=>m.newUser.u_sex=e)},{default:n((()=>[u(v,{name:1},{default:n((()=>[f("男")])),_:1}),u(v,{name:2},{default:n((()=>[f("女")])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(C,{label:"头像"},{default:n((()=>[u(k,{onOnSuccess:g.onUploadAvatar,ref:"uUpload",name:"avatar",action:m.action,"auto-upload":!1,"max-count":1},null,8,["onOnSuccess","action"]),u(D,{onClick:g.uploadAvatar},{default:n((()=>[f("上传")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u(D,{onClick:g.register,style:{width:"40%","margin-top":"30rpx"},ripple:!0,type:"primary"},{default:n((()=>[f("注册")])),_:1},8,["onClick"]),u(x,{ref:"uToast"},null,512)])),_:1})}],["__scopeId","data-v-b145b7fe"]]);export{L as default};
